/* Minimal Chat UI - Optimized for Performance */
.chat-root {
	display: flex;
	flex-direction: column;
	height: 100%;
	font-family: var(--vscode-font-family);
	color: var(--vscode-foreground);
	background-color: var(--vscode-sideBar-background);
}

.chat-transcript {
	flex: 1;
	overflow-y: auto;
	overflow-x: hidden;
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	padding: 0.5rem 0.75rem;
	scroll-behavior: smooth;
}

/* Performance: Only render visible + near-visible content */
.chat-message-wrapper {
	display: flex;
	flex-direction: column;
	gap: 0.125rem;
	content-visibility: auto;
	contain-intrinsic-size: auto 60px;
}

.chat-message {
	padding: 0.375rem 0.625rem;
	line-height: 1.5;
	font-size: 13px;
	white-space: pre-wrap;
	word-break: break-word;
	border-left: 1px solid transparent;
}

.chat-message--user {
	color: var(--vscode-foreground);
	opacity: 0.85;
}

.chat-message--assistant {
	color: var(--vscode-foreground);
	border-left-color: var(--vscode-focusBorder);
	background: var(--vscode-editor-background);
}

.chat-message--tool {
	font-family: var(--vscode-editor-font-family);
	font-size: 12px;
	background: var(--vscode-editor-background);
	border-left-color: var(--vscode-charts-green);
	color: var(--vscode-foreground);
	opacity: 0.9;
}

.chat-message--system {
	font-size: 12px;
	opacity: 0.6;
	font-style: italic;
	text-align: center;
}

.chat-message--error {
	background: var(--vscode-inputValidation-errorBackground);
	border-left-color: var(--vscode-inputValidation-errorBorder);
	color: var(--vscode-errorForeground);
}

.chat-message-meta {
	display: none;
	align-items: center;
	gap: 0.375rem;
	padding: 0 0.625rem;
	font-size: 11px;
}

.chat-message-wrapper:hover .chat-message-meta {
	display: flex;
	opacity: 0.7;
	animation: fade-in 0.15s ease;
}

@keyframes fade-in {
	from { opacity: 0; transform: translateY(-2px); }
	to { opacity: 0.7; transform: translateY(0); }
}

.chat-message-actions {
	display: flex;
	gap: 0.125rem;
	margin-left: auto;
	transform: translateZ(0);
}

.chat-action-button {
	padding: 0.125rem 0.25rem;
	border: none;
	background: transparent;
	color: var(--vscode-foreground);
	cursor: pointer;
	font-size: 13px;
	opacity: 0.6;
	transition: opacity 0.15s ease, background 0.15s ease;
	transform: translateZ(0);
	backface-visibility: hidden;
}

.chat-action-button:hover {
	opacity: 1;
	background: var(--vscode-toolbar-hoverBackground);
}

.chat-tool-badge {
	display: inline-flex;
	align-items: center;
	gap: 0.25rem;
	padding: 0.125rem 0.375rem;
	background: var(--vscode-badge-background);
	color: var(--vscode-badge-foreground);
	font-size: 11px;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.chat-hitl-badge {
	display: inline-flex;
	align-items: center;
	gap: 0.25rem;
	padding: 0.125rem 0.375rem;
	background: var(--vscode-editorWarning-background);
	color: var(--vscode-editorWarning-foreground);
	font-size: 11px;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.chat-status {
	min-height: 0;
	padding: 0.375rem 0.75rem;
	font-size: 12px;
	color: var(--vscode-descriptionForeground);
}

.chat-status:empty {
	display: none;
}

.chat-skeleton {
	display: flex;
	flex-direction: column;
	gap: 0.375rem;
	padding: 0.375rem 0.625rem;
	border-left: 1px solid var(--vscode-focusBorder);
	background: var(--vscode-editor-background);
}

.chat-skeleton-line {
	height: 10px;
	background: linear-gradient(
		90deg,
		var(--vscode-input-background) 0%,
		var(--vscode-input-background) 40%,
		var(--vscode-inputOption-activeBackground) 50%,
		var(--vscode-input-background) 60%,
		var(--vscode-input-background) 100%
	);
	background-size: 200% 100%;
	opacity: 0.3;
	animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.chat-skeleton-line:nth-child(1) { width: 75%; }
.chat-skeleton-line:nth-child(2) { width: 90%; animation-delay: 0.1s; }
.chat-skeleton-line:nth-child(3) { width: 65%; animation-delay: 0.2s; }

@keyframes skeleton-shimmer {
	0% { background-position: 200% 0; }
	100% { background-position: -200% 0; }
}

.chat-composer {
	display: flex;
	flex-direction: column;
	gap: 0.375rem;
	padding: 0.75rem;
	border-top: 1px solid var(--vscode-panel-border);
	background: var(--vscode-sideBar-background);
}

.chat-input {
	min-height: 60px;
	max-height: 200px;
	padding: 0.5rem 0.625rem;
	border: 1px solid var(--vscode-input-border);
	background: var(--vscode-input-background);
	color: var(--vscode-input-foreground);
	font-family: var(--vscode-font-family);
	font-size: 13px;
	line-height: 1.5;
	resize: vertical;
	outline: none;
}

.chat-input::placeholder {
	color: var(--vscode-input-placeholderForeground);
	opacity: 0.8;
}

.chat-input:focus {
	border-color: var(--vscode-focusBorder);
}

.chat-input:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.chat-actions {
	display: flex;
	gap: 0.375rem;
	justify-content: flex-end;
}

.chat-button {
	padding: 0.375rem 0.75rem;
	border: none;
	background: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	cursor: pointer;
	font-size: 12px;
	font-family: var(--vscode-font-family);
	font-weight: 500;
	transition: background 0.15s;
}

.chat-button:hover:not(:disabled) {
	background: var(--vscode-button-hoverBackground);
}

.chat-button:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.chat-button--secondary {
	background: var(--vscode-button-secondaryBackground);
	color: var(--vscode-button-secondaryForeground);
}

.chat-button--secondary:hover:not(:disabled) {
	background: var(--vscode-button-secondaryHoverBackground);
}

.chat-empty-state {
	margin: auto;
	text-align: center;
	color: var(--vscode-descriptionForeground);
	opacity: 0.5;
	font-size: 13px;
}

.chat-reasoning {
	padding: 0.25rem 0.625rem;
	background: transparent;
	border-left: 1px solid var(--vscode-editorInfo-foreground);
	font-size: 12px;
	opacity: 0.7;
	font-style: italic;
	color: var(--vscode-descriptionForeground);
}

.codicon {
	font-family: codicon;
	font-size: inherit;
	vertical-align: middle;
}
